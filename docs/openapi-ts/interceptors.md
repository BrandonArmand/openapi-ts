---
title: Interceptors
description: Understanding interceptors.
---

# Interceptors

Interceptors (middleware) can be used to modify requests before they're sent or responses before they're returned to the rest of your application. If you're not using the new Fetch API client, jump to the [legacy clients](#legacy-clients) section.

Below is an example request interceptor

::: code-group

```js [use]
import { client } from '@hey-api/client-fetch';

client.interceptors.request.use((request, options) => {
  request.headers.set('Authorization', 'Bearer <my_token>');
  return request;
});
```

```js [eject]
import { client } from '@hey-api/client-fetch';

client.interceptors.request.eject((request, options) => {
  request.headers.set('Authorization', 'Bearer <my_token>');
  return request;
});
```

:::

and an example response interceptor

::: code-group

```js [use]
import { client } from '@hey-api/client-fetch';

client.interceptors.response.use((response, request, options) => {
  trackAnalytics(response);
  return response;
});
```

```js [eject]
import { client } from '@hey-api/client-fetch';

client.interceptors.response.eject((response, request, options) => {
  trackAnalytics(response);
  return response;
});
```

:::

::: tip
To eject, you must provide a reference to the function that was passed to `use()`.
:::

## Legacy Clients

The following section applies to legacy clients generated by `@hey-api/openapi-ts`. Below is an example request interceptor

::: code-group

```js [use]
OpenAPI.interceptors.request.use((request) => {
  doSomethingWithRequest(request);
  return request; // <-- must return request
});
```

```js [eject]
OpenAPI.interceptors.request.eject((request) => {
  doSomethingWithRequest(request);
  return request; // <-- must return request
});
```

:::

and an example response interceptor

::: code-group

```js [use]
OpenAPI.interceptors.response.use(async (response) => {
  await doSomethingWithResponse(response); // async
  return response; // <-- must return response
});
```

```js [eject]
OpenAPI.interceptors.response.eject(async (response) => {
  await doSomethingWithResponse(response); // async
  return response; // <-- must return response
});
```

:::

::: tip
To eject, you must provide the same function that was passed to `use()`.
:::

::: warning
Angular client does not currently support request interceptors.
:::

<!--@include: ../examples.md-->
